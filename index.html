<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qab Lima</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="estilo.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="imagens/favicon.png">
    
    <!-- Leitor 3D do Google -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
</head>
<body>

    <div class="site-container">
        <!-- COLUNA 1: IDENTIDADE -->
        <header class="coluna-esquerda">
            <div class="header-top">
                <div>
                    <h1 class="logo"><a href="index.html">Qab Lima</a></h1>
                </div>
                <!-- BOTÃO MOBILE -->
                <button id="btn-mobile" onclick="abrirMenuMobile()" aria-label="Abrir Menu">
                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
            </div>

            <!-- REDES SOCIAIS (DESKTOP) -->
            <div class="social-links">
                <a href="https://instagram.com/qabqabqabqabqab" target="_blank"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
                <a href="https://x.com/qabqabqab" target="_blank"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
                <a href="https://zora.co/@qabqabqab" target="_blank"><svg viewBox="0 0 24 24"><defs><radialGradient id="zoraGradDesktop" cx="70%" cy="25%" r="65%"><stop offset="0%" style="stop-color: #ffffff; stop-opacity: 1" /><stop offset="100%" style="stop-color: #000000; stop-opacity: 1" /></radialGradient></defs><circle cx="12" cy="12" r="10" fill="url(#zoraGradDesktop)"/></svg></a>
                <a href="https://farcaster.xyz/qabqabqab" target="_blank"><svg viewBox="0 0 1000 1000"><path d="M885.67,162.08v90.43h-92.85v89.24c2.09,3.4,4.74,3.28,8.21,3.69,26.03,3.05,57.93-2.51,84.63-.12v492.6l-152.05-.31-79.58-373.79c-44.79-161.75-263.26-161.88-308.09,0l-79.26,374.1H114.33v-492.6h89.27l3.57-3.57v-89.24h-92.85v-90.43h771.34Z"/></svg></a>
                <a href="https://base.app/profile/0x802250f10992B6ef60AC8C5eb783351AaD2Fff28" target="_blank"><svg viewBox="0 0 24 24" fill="currentColor"><rect x="2" y="2" width="20" height="20" rx="5" /></svg></a>
            </div>
        </header>

        <!-- COLUNA 2: CONTEÚDO -->
        <main class="coluna-meio">
            
            <!-- FEED DE ARTES (Visível) -->
            <div id="feed-artes">
                <!-- JS preenche aqui -->
            </div>

            <!-- ABOUT ME (Escondido) -->
            <div id="about-content" class="conteudo-sobre" style="display: none;">
                <h2>about me</h2>
                <div>
                    <!-- Foto à esquerda, texto fluindo -->
                    <img src="imagens/foto-perfil.jpg" alt="Qab Lima" class="img-sobre">
                    
                    <p>I am a transdisciplinary artist from São Paulo, Brazil, driven by a curiosity that moves between different artistic languages. My work navigates between digital art, illustration, 2D animation, 3D modeling and sculpture, video editing, music, and emerging technologies such as blockchain. I like to create in a way where nothing has to be just one thing — where different practices connect and expand together.</p>
                    
                    <p>My research emerges from my experience as a trans body and from my connection with memory, ancestry, and imagination. I create from questions that cross me: identity, body, displacement, social frictions, and the possibilities of building other possible worlds. Between the digital and the physical, between sound and image, between the technical and the intuitive, my work seeks paths that question, affirm, transform, and open possibilities for new narratives.</p>
                    
                    <p>Alongside my artistic trajectory, I carry nine years of experience working in advertising agencies, where I held positions as Designer, Motion Designer, and UI/UX. This experience expanded my relationship with visual language, creative processes, and narrative construction, and today it is present in my work organically — both in technical precision and in the creation of sensory and interactive experiences.</p>
                    
                    <p>My education includes places that helped shape my artistic foundation — I studied drawing, artistic fundamentals, and illustration at Quanta Academia de Artes and SENAC. At Escola Saga, I deepened my knowledge in graphic design and digital illustration. Before that, I studied English at Evolutime, which broadened my relationship with international references, research, and artistic spaces.</p>
                    
                    <p>Since 2021, I have also been developing, in a self-taught way, my involvement with Web3 — exploring blockchain, NFTs, and smart contracts as possible tools for autonomy and for circulating art and community. I move between digital environments and physical spaces, understanding each medium as an opportunity to build new paths. My practice is in constant transformation, always in movement, between ancestry, technology, language, and body.</p>
                </div>
            </div>

            <!-- 3. INTERVIEWS (ESCONDIDO POR PADRÃO) -->
            <div id="interviews-content" class="conteudo-interviews" style="display: none;">
                
                <!-- POST 1: EMBED DO INSTAGRAM -->
                <article class="post-interview">
                    <!-- Título e Info (Opcional) -->
                    <h2>SKATE ARTE VISUAL</h2>
                    <p>entrevista para coletivo Carlton, 2025</p>

                    <!-- CÓDIGO DE EMBED DO INSTAGRAM -->
                    <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/p/DH-YK4jOjt7/?utm_source=ig_embed&amp;utm_campaign=loading" data-instgrm-version="14" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">
                    </blockquote>
                    <!-- O Script que faz o embed funcionar -->
                    <script async src="//www.instagram.com/embed.js"></script>
                </article>

                <!-- EXEMPLO POST 2: VÍDEO LOCAL (FUTURO) -->
                <!-- 
                <article class="post-interview">
                    <h2>My Documentary</h2>
                    <p>video file, 2023</p>
                    <video src="imagens/meu-video.mp4" controls style="width: 100%;"></video>
                </article> 
                -->

            </div>

            <!-- 4. EXHIBITIONS (ESCONDIDO POR PADRÃO) -->
            <div id="exhibitions-content" class="conteudo-exhibitions" style="display: none;">
                
                <!-- EXPOSIÇÃO 1 -->
                <article class="post-exhibition">
                    <h3>• ‘Absretratos’ exhibition | August, 2023</h3>
                    <p>Solo exhibition of the collection of ‘absretratos’ paintings outdoors in the Vila Any neighborhood.</p>
                    
                    <!-- GALERIA DE FOTOS (LADO A LADO) -->
                    <div class="galeria-exhibitions">
                        <!-- Substitua pelos nomes dos seus arquivos -->
                        <img src="imagens/exposicao1-foto1.jpg" alt="Foto" onclick="abrirExhibitionFeed(this)">
                        <img src="imagens/exposicao1-foto2.jpg" alt="Foto" onclick="abrirExhibitionFeed(this)">
                        <img src="imagens/exposicao1-foto3.jpg" alt="Foto" onclick="abrirExhibitionFeed(this)">
                        <img src="imagens/exposicao1-foto4.jpg" alt="Foto" onclick="abrirExhibitionFeed(this)">
                    </div>

                    <!-- LINK CLICÁVEL -->
                    <a href="https://x.com/qabqabqab/status/1690802293665378304" target="_blank" class="link-exhibition">X Post</a>
                </article>

                <!-- EXPOSIÇÃO 2 (EXEMPLO) -->
                <!-- Copie e cole o article acima para adicionar mais -->

            </div>

        </main>

        <!-- COLUNA 3: MENU -->
        <nav class="coluna-direita" id="menu-principal">
            <button id="btn-fechar-menu" onclick="fecharMenuMobile()" aria-label="Fechar Menu">
                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>

            <ul id="menu-categorias">
                <li><a href="#" id="link-todos" class="menu-link menu-all" onclick="filtrar('todos'); fecharMenuMobile()">all</a></li>
                <li><a href="#" id="link-paintings" class="menu-link" onclick="filtrar('paintings'); fecharMenuMobile()">paintings</a></li>
                <li><a href="#" id="link-digital-illustration" class="menu-link" onclick="filtrar('digital illustration'); fecharMenuMobile()">digital illustration</a></li>
                <li><a href="#" id="link-sketchbooks" class="menu-link" onclick="filtrar('sketchbooks'); fecharMenuMobile()">sketchbooks</a></li>
                <li><a href="#" id="link-3d" class="menu-link" onclick="filtrar('3d'); fecharMenuMobile()">3D</a></li>
                <li><a href="#" id="link-sculpture" class="menu-link" onclick="filtrar('sculpture'); fecharMenuMobile()">sculpture</a></li>
                <li><a href="#" id="link-music" class="menu-link" onclick="filtrar('music'); fecharMenuMobile()">music</a></li>
                <li><a href="#" id="link-2D-animation" class="menu-link" onclick="filtrar('2D animation'); fecharMenuMobile()">2D animation</a></li>
                <li><a href="#" id="link-pixel-art" class="menu-link" onclick="filtrar('pixel art'); fecharMenuMobile()">pixel art</a></li>
                <li><a href="#" id="link-skateboard" class="menu-link" onclick="filtrar('skateboard'); fecharMenuMobile()">skateboard</a></li>
            </ul>
            
            <div class="separador"></div>

            <ul>
                <!-- LINK ABOUT CHAMA A FUNÇÃO -->
                <li><a href="#" id="link-about" class="menu-link" onclick="abrirAbout(); fecharMenuMobile()">about me</a></li>
                <li><a href="#" id="link-interviews" class="menu-link" onclick="abrirInterviews(); fecharMenuMobile()">interviews</a></li>
                <li><a href="#" id="link-exhibitions" class="menu-link" onclick="abrirExhibitions(); fecharMenuMobile()">exhibitions</a></li>
                <!--li><a href="#">tutorials</a></li-->
            </ul>

            <!-- REDES SOCIAIS MOBILE -->
            <div class="social-mobile-menu">
                <a href="https://instagram.com/qabqabqabqabqab" target="_blank"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
                <a href="https://x.com/qabqabqab" target="_blank"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
                <a href="https://zora.co/@qabqabqab" target="_blank"><svg viewBox="0 0 24 24"><defs><radialGradient id="zoraGradMobile" cx="70%" cy="25%" r="65%"><stop offset="0%" style="stop-color: #ffffff; stop-opacity: 1" /><stop offset="100%" style="stop-color: #000000; stop-opacity: 1" /></radialGradient></defs><circle cx="12" cy="12" r="10" fill="url(#zoraGradMobile)"/></svg></a>
                <a href="https://farcaster.xyz/qabqabqab" target="_blank"><svg viewBox="0 0 1000 1000"><path d="M885.67,162.08v90.43h-92.85v89.24c2.09,3.4,4.74,3.28,8.21,3.69,26.03,3.05,57.93-2.51,84.63-.12v492.6l-152.05-.31-79.58-373.79c-44.79-161.75-263.26-161.88-308.09,0l-79.26,374.1H114.33v-492.6h89.27l3.57-3.57v-89.24h-92.85v-90.43h771.34Z"/></svg></a>
                <a href="https://base.app/profile/0x802250f10992B6ef60AC8C5eb783351AaD2Fff28" target="_blank"><svg viewBox="0 0 24 24" fill="currentColor"><rect x="2" y="2" width="20" height="20" rx="5" /></svg></a>
            </div>
        </nav>
    </div>

    <!-- OVERLAY FULLSCREEN -->
    <div id="fullscreen-overlay" class="escondido">
        <button class="btn-fechar" onclick="fecharFullscreen()">X CLOSE</button>
        <div class="seta-cima" onclick="navegarFullscreen(-1)">▲</div>
        <div class="seta-baixo" onclick="navegarFullscreen(1)">▼</div>
        <div id="fullscreen-scroll" class="fullscreen-track"></div>
    </div>

    <!-- 1. Importa os dados -->
    <script src="dados.js"></script>

    <!-- 2. Programação Lógica -->
    <script>
        const feedContainer = document.getElementById('feed-artes');
        const aboutContainer = document.getElementById('about-content');
        const interviewsContainer = document.getElementById('interviews-content');
        const exhibitionsContainer = document.getElementById('exhibitions-content'); // NOVO
        
        let listaAtual = []; 
        let observerVideos; 
        let audioAtual = null;

        // --- NAVEGAÇÃO (ATUALIZADA COM EXHIBITIONS) ---

        function abrirExhibitions() {
            // Esconde tudo
            feedContainer.style.display = 'none';
            aboutContainer.style.display = 'none';
            interviewsContainer.style.display = 'none';
            // Mostra Exhibitions
            exhibitionsContainer.style.display = 'block';

            // Menu Bold
            document.querySelectorAll('.menu-link').forEach(link => link.classList.remove('ativo-bold'));
            const linkExh = document.getElementById('link-exhibitions');
            if(linkExh) linkExh.classList.add('ativo-bold');

            window.scrollTo(0,0);
        }

        function abrirInterviews() {
            feedContainer.style.display = 'none';
            aboutContainer.style.display = 'none';
            exhibitionsContainer.style.display = 'none'; // Esconde
            interviewsContainer.style.display = 'block';

            document.querySelectorAll('.menu-link').forEach(link => link.classList.remove('ativo-bold'));
            const linkInt = document.getElementById('link-interviews');
            if(linkInt) linkInt.classList.add('ativo-bold');

            window.scrollTo(0,0);
            if (window.instgrm) window.instgrm.Embeds.process();
        }

        function abrirAbout() {
            feedContainer.style.display = 'none';
            interviewsContainer.style.display = 'none';
            exhibitionsContainer.style.display = 'none'; // Esconde
            aboutContainer.style.display = 'block';

            document.querySelectorAll('.menu-link').forEach(link => link.classList.remove('ativo-bold'));
            const linkAbout = document.getElementById('link-about');
            if(linkAbout) linkAbout.classList.add('ativo-bold');

            window.scrollTo(0,0);
        }

        function filtrar(categoria) {
            feedContainer.style.display = 'flex'; 
            feedContainer.style.flexDirection = 'column'; 
            aboutContainer.style.display = 'none';
            interviewsContainer.style.display = 'none';
            exhibitionsContainer.style.display = 'none'; // Esconde

            document.querySelectorAll('.menu-link').forEach(link => link.classList.remove('ativo-bold'));
            
            let idParaAtivar = 'link-' + categoria.replace(' ', '-');
            if (categoria === 'todos') idParaAtivar = 'link-todos';
            const linkAtivo = document.getElementById(idParaAtivar);
            if(linkAtivo) linkAtivo.classList.add('ativo-bold');

            if(categoria === 'todos') {
                renderizarFeed(embaralhar([...minhasArtes]));
            } else {
                const filtradas = minhasArtes.filter(a => a.categoria === categoria);
                renderizarFeed(embaralhar(filtradas));
            }
            window.scrollTo(0,0);
        }

        // --- RESTO DO CÓDIGO (IGUAL AO ANTERIOR) ---
        
        function abrirMenuMobile() {
            document.getElementById('menu-principal').classList.add('aberto');
            document.body.style.overflow = 'hidden';
        }
        function fecharMenuMobile() {
            document.getElementById('menu-principal').classList.remove('aberto');
            document.body.style.overflow = 'auto';
        }

        function embaralhar(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function renderizarFeed(lista) {
            feedContainer.innerHTML = ''; 
            listaAtual = lista; 

            lista.forEach((arte, index) => {
                const item = document.createElement('article');
                item.className = 'post-arte';
                
                let tagExtra = '';
                if (arte.extra) {
                    if (arte.linkExterno) {
                        tagExtra = `<div class="info-dir"><a href="${arte.linkExterno}" target="_blank" class="botao-link">+ ${arte.extra}</a></div>`;
                    } else {
                        tagExtra = `<div class="info-dir"><span>+ ${arte.extra}</span></div>`;
                    }
                }

                let midiaHTML = '';

                if (arte.tipo === 'audio') {
                    midiaHTML = `
                        <div class="audio-card">
                            <img src="${arte.capa}" class="audio-capa" alt="Capa">
                            <div class="audio-interface">
                                <audio id="audio-file-${index}" src="${arte.arquivo}" ontimeupdate="atualizarBarra(${index})" onloadedmetadata="carregarTempoTotal(${index})"></audio>
                                <button class="btn-play-pause" onclick="toggleAudio(${index})">
                                    <svg id="icon-play-${index}" class="icon-play" width="40" height="40" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                    <svg id="icon-pause-${index}" class="icon-pause" width="40" height="40" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                                </button>
                                <span id="tempo-${index}" class="tempo-audio">0:00</span>
                                <div class="barra-container" onclick="buscarAudio(event, ${index})">
                                    <div class="barra-fundo"><div id="progresso-${index}" class="barra-progresso"></div></div>
                                </div>
                            </div>
                        </div>`;
                } else if (arte.tipo === 'video') {
                    midiaHTML = `<div class="imagem-container" onclick="abrirFullscreen(${index})"><video src="${arte.arquivo}" autoplay loop muted playsinline style="width: 100%; display: block; cursor: zoom-in;"></video></div>`;
                } else if (arte.tipo === '3d') {
                    midiaHTML = `<div class="imagem-container" style="height: 500px; background: #f0f0f0; cursor: grab;"><model-viewer src="${arte.arquivo}" auto-rotate camera-controls shadow-intensity="1" style="width: 100%; height: 100%;"></model-viewer></div>`;
                } else {
                    midiaHTML = `<div class="imagem-container" onclick="abrirFullscreen(${index})"><img src="${arte.arquivo}" alt="${arte.titulo}" style="cursor: zoom-in;"></div>`;
                }

                item.innerHTML = `${midiaHTML}<div class="info-container"><div class="info-esq"><h2>${arte.titulo}</h2><p>${arte.info}</p><a class="link-categoria-feed" onclick="filtrar('${arte.categoria}')">${arte.categoria}</a></div>${tagExtra}</div>`;
                feedContainer.appendChild(item);
            });
        }

        function toggleAudio(index) {
            const player = document.getElementById(`audio-file-${index}`);
            const iconPlay = document.getElementById(`icon-play-${index}`);
            const iconPause = document.getElementById(`icon-pause-${index}`);
            if (audioAtual && audioAtual !== player) {
                audioAtual.pause();
                document.querySelectorAll('.icon-pause').forEach(el => el.style.display = 'none');
                document.querySelectorAll('.icon-play').forEach(el => el.style.display = 'block');
            }
            if (player.paused) {
                player.play();
                iconPlay.style.display = 'none';
                iconPause.style.display = 'block';
                audioAtual = player;
            } else {
                player.pause();
                iconPlay.style.display = 'block';
                iconPause.style.display = 'none';
            }
        }
        function atualizarBarra(index) {
            const player = document.getElementById(`audio-file-${index}`);
            const progresso = document.getElementById(`progresso-${index}`);
            const tempoTexto = document.getElementById(`tempo-${index}`);
            if (player.duration) {
                const porcentagem = (player.currentTime / player.duration) * 100;
                progresso.style.width = porcentagem + '%';
                const minutos = Math.floor(player.currentTime / 60);
                const segundos = Math.floor(player.currentTime % 60);
                tempoTexto.innerText = `${minutos}:${segundos < 10 ? '0' : ''}${segundos}`;
            }
        }
        function carregarTempoTotal(index) {
            const player = document.getElementById(`audio-file-${index}`);
            const tempoTexto = document.getElementById(`tempo-${index}`);
            if(player.duration) {
                const minutos = Math.floor(player.duration / 60);
                const segundos = Math.floor(player.duration % 60);
                tempoTexto.innerText = `${minutos}:${segundos < 10 ? '0' : ''}${segundos}`;
            }
        }
        function buscarAudio(e, index) {
            const player = document.getElementById(`audio-file-${index}`);
            const barra = e.currentTarget; 
            const clickX = e.offsetX;
            const larguraTotal = barra.clientWidth;
            player.currentTime = (clickX / larguraTotal) * player.duration;
        }

        const overlay = document.getElementById('fullscreen-overlay');
        const scrollTrack = document.getElementById('fullscreen-scroll');

        function abrirFullscreen(indexClicado) {
            if (listaAtual[indexClicado].tipo === 'audio') return;
            scrollTrack.innerHTML = ''; 
            listaAtual.forEach((arte, i) => {
                if (arte.tipo === 'audio') return; 
                const div = document.createElement('div');
                div.className = 'fullscreen-item';
                div.id = `fs-item-${i}`;
                if (arte.tipo === 'video') {
                    div.innerHTML = `<video src="${arte.arquivo}" controls loop style="max-width: 100%; max-height: 95vh;"></video>`;
                } else if (arte.tipo === '3d') {
                     div.innerHTML = `<model-viewer src="${arte.arquivo}" auto-rotate camera-controls shadow-intensity="1" style="width: 65%; height: 55vh; margin: 0 auto;"></model-viewer>`;
                } else {
                    div.innerHTML = `<img src="${arte.arquivo}" alt="${arte.titulo}">`;
                }
                scrollTrack.appendChild(div);
            });
            overlay.style.opacity = '0';
            overlay.classList.remove('escondido');
            document.body.style.overflow = 'hidden';
            if (audioAtual) {
                audioAtual.pause();
                document.querySelectorAll('.icon-pause').forEach(el => el.style.display = 'none');
                document.querySelectorAll('.icon-play').forEach(el => el.style.display = 'block');
            }
            const alvo = document.getElementById(`fs-item-${indexClicado}`);
            if (alvo) alvo.scrollIntoView({ behavior: 'auto' });
            iniciarObserver();
            setTimeout(() => { overlay.style.opacity = '1'; }, 50);
        }

// --- NOVO: FULLSCREEN DE EXPOSIÇÕES (COM ROLAGEM/FEED) ---
        function abrirExhibitionFeed(imgClicada) {
            // 1. Coleta TODAS as imagens dentro da aba Exhibitions
            const todasImagens = document.querySelectorAll('#exhibitions-content img');
            
            // 2. Descobre qual o número (índice) da que você clicou
            const listaImagens = Array.from(todasImagens);
            const indexClicado = listaImagens.indexOf(imgClicada);

            // 3. Limpa o overlay e prepara o carrossel
            scrollTrack.innerHTML = ''; 

            listaImagens.forEach((img, i) => {
                const div = document.createElement('div');
                div.className = 'fullscreen-item';
                div.id = `fs-exh-${i}`; // ID temporário para navegação
                div.innerHTML = `<img src="${img.src}" alt="Exhibition Photo">`; 
                scrollTrack.appendChild(div);
            });

            // 4. Abre o overlay (invisível primeiro)
            overlay.style.opacity = '0';
            overlay.classList.remove('escondido');
            document.body.style.overflow = 'hidden';

            // 5. Rola imediatamente para a foto clicada
            const alvo = document.getElementById(`fs-exh-${indexClicado}`);
            if (alvo) alvo.scrollIntoView({ behavior: 'auto' });

            // 6. Aparece suavemente
            setTimeout(() => { overlay.style.opacity = '1'; }, 50);
        }

        function fecharFullscreen() {
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.classList.add('escondido');
                document.body.style.overflow = 'auto';
                if (observerVideos) observerVideos.disconnect();
                scrollTrack.querySelectorAll('video').forEach(v => v.pause());
                scrollTrack.innerHTML = ''; 
            }, 300);
        }

        function navegarFullscreen(direcao) {
            const alturaItem = window.innerHeight; 
            const scrollAtual = scrollTrack.scrollTop;
            const indiceAtual = Math.round(scrollAtual / alturaItem);
            const proximoIndice = indiceAtual + direcao;
            const itens = scrollTrack.children;
            if (proximoIndice >= 0 && proximoIndice < itens.length) {
                itens[proximoIndice].scrollIntoView({ behavior: 'smooth' });
            }
        }

        function iniciarObserver() {
            if (observerVideos) observerVideos.disconnect();
            const opcoes = { root: scrollTrack, threshold: 0.6 };
            observerVideos = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.target.tagName === 'VIDEO') {
                        if (entry.isIntersecting) {
                            entry.target.play().catch(e => console.log("Autoplay bloqueado"));
                        } else {
                            entry.target.pause();
                        }
                    }
                });
            }, opcoes);
            scrollTrack.querySelectorAll('video').forEach(video => observerVideos.observe(video));
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !overlay.classList.contains('escondido')) fecharFullscreen();
        });
        overlay.addEventListener('click', (e) => {
            if (e.target.tagName === 'IMG' || e.target.tagName === 'VIDEO' || e.target.tagName === 'MODEL-VIEWER' || e.target.classList.contains('seta-cima') || e.target.classList.contains('seta-baixo')) return; 
            fecharFullscreen();
        });

        if (typeof minhasArtes !== 'undefined') {
            const inicial = embaralhar([...minhasArtes]);
            renderizarFeed(inicial);
            document.getElementById('link-todos').classList.add('ativo-bold');
        } else {
            console.error("Erro: arquivo dados.js não encontrado.");
        }
    </script>
</body>
</html>